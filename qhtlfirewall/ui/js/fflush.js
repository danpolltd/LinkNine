// fflush.js - Flush / Restart button (short click Flush / Hold Restart)
(function(){ if(window._fwFflushLoaded) return; window._fwFflushLoaded=1; var b=document.getElementById('fwb8'); if(!b) return; b.addEventListener('mousedown',function(ev){ b.dataset.down=Date.now(); b.classList.add('fw-flush-holding'); var lab=document.getElementById('fw-flush-label'); if(lab) lab.textContent='Hold'; b._holdTimer=setTimeout(function(){ if(b.dataset.down){ if(lab) lab.textContent='Restart'; window.submitAction('restartq'); b.classList.remove('fw-flush-holding'); delete b.dataset.down; } },3000); }); b.addEventListener('mouseup',function(){ var lab=document.getElementById('fw-flush-label'); if(b._holdTimer){ clearTimeout(b._holdTimer); } if(b.dataset.down){ window.submitAction('denyf'); if(lab) lab.textContent='Flush'; delete b.dataset.down; b.classList.remove('fw-flush-holding'); } }); b.addEventListener('mouseleave',function(){ if(b.dataset.down){ if(b._holdTimer) clearTimeout(b._holdTimer); delete b.dataset.down; b.classList.remove('fw-flush-holding'); var lab=document.getElementById('fw-flush-label'); if(lab) lab.textContent='Flush'; } });})();
