QhtLink Firewall (qhtlfirewall) Changelog

Date: 2025-09-29
Version: 0.1.9 “Snow Castle”

TUI (Terminal UI)
- New dialog-based TUI available post-install (qhtlfirewall-tui).
- Config editor by section with safe backups and inline key editing.
- Lists editor for allow/deny/ignore/pignore/rignore/fignore/etc.
- Quick Allow/Deny, Temporary rules, Open Ports, Update helpers.
- Logs viewer now sources log paths from /etc/qhtlfirewall/qhtlfirewall.logfiles with live tail view and friendly empty/unreadable handling.
- Visual polish: global backtitle, animated splash, spinner while executing commands, and subtle transitions.
- Dedicated File Explorer menu launching Midnight Commander (mc) if available.

Installers
- Deploy the TUI and attempt to install dialog when available.
- Post-install message informs how to launch the TUI.

Misc
- Safer awk-based config updates replacing fragile sed expressions.
- Various bug fixes and portability improvements.

Date: 2025-09-20
Version: 2.0 (maintenance update)

Installer and Service Sequencing
- Added an install guard flag at /var/lib/qhtlfirewall/.installing to prevent qhtlwaterfall from starting during installation.
- Updated systemd unit qhtlwaterfall.service to include ConditionPathExists=!/var/lib/qhtlfirewall/.installing so the daemon won’t launch while the guard exists.
- The installer now stops qhtlwaterfall at the beginning of install and restarts services at the end in the correct order.

DirWatch (LF_DIRWATCH) Stability During Install
- During install, if an existing configuration is detected, LF_DIRWATCH and LF_DIRWATCH_FILE are temporarily set to 0 to avoid false-positive alerts from temporary files and directories.
- Original LF_DIRWATCH settings are restored automatically after installation completes.

cPanel/WHM UI
- Hardened WHM CGI (cpanel/qhtlfirewall.cgi) template rendering: capture template output and safely print it (handles SCALAR/ARRAY refs), preventing undefined symbol and SCALAR(...) output issues.
- Confirmed compatibility with Cpanel::Template and ensured template discovery works as expected.

General
- Improved restart ordering and installer messaging for clarity.

Notes
- No version bump; functional changes are installer/packaging/UI safety improvements.
- Consider adding environment-specific patterns to qhtlfirewall.fignore to keep DirWatch quiet for benign /tmp activity.

